/*!
 * paira.instagram
 * @version 1.5
 * @author ThemeTidy <support@themetidy.com>
 * https://www.themetidy.com
 */
!function(e){var a={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!1,display_biography:!1,display_gallery:!0,display_igtv:!1,callback:null,styling:!1,items:8,items_per_row:4,margin:0,image_size:640,lazy_load:!1,on_error:console.error},i={150:0,240:1,320:2,480:3,640:4},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};e.instagramFeed=function(t){var n=e.fn.extend({},a,t);if(""==n.username&&""==n.tag)return n.on_error("Instagram Feed: Error, no username nor tag defined.",1),!1;if(void 0!==n.get_data&&console.warn("Instagram Feed: options.get_data is deprecated, options.callback is always called if defined"),null==n.callback&&""==n.container)return n.on_error("Instagram Feed: Error, neither container found nor callback defined.",2),!1;var s=""==n.username,o=s?n.host+"explore/tags/"+n.tag+"/":n.host+n.username+"/";return e.get(o,function(a){try{a=a.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return void n.on_error("Instagram Feed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26",3)}if(void 0!==(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage)){if(a=a[0].graphql.user||a[0].graphql.hashtag,""!=n.container){var t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};if(n.styling){t.profile_container=" style='text-align:center;'",t.profile_image=" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",t.profile_name=" style='font-size:1.2em;'",t.profile_biography=" style='font-size:1em;'";var o=(100-2*n.margin*n.items_per_row)/n.items_per_row;t.gallery_image=" style='margin:"+n.margin+"% "+n.margin+"%;width:"+o+"%;float:left;'"}var l="";n.display_profile&&(l+="<div class='instagram_profile'"+t.profile_container+">",l+="<img class='instagram_profile_image' src='"+a.profile_pic_url+"' alt='"+(s?a.name+" tag pic":a.username+" profile pic")+"'"+t.profile_image+(n.lazy_load?" loading='lazy'":"")+" />",l+=s?"<p class='instagram_tag'"+t.profile_name+"><a href='https://www.instagram.com/explore/tags/"+n.tag+"' rel='noopener' target='_blank'>#"+n.tag+"</a></p>":"<p class='instagram_username'"+t.profile_name+">@"+a.full_name+" (<a href='https://www.instagram.com/"+n.username+"' rel='noopener' target='_blank'>@"+n.username+"</a>)</p>",!s&&n.display_biography&&(l+="<p class='instagram_biography'"+t.profile_biography+">"+a.biography+"</p>"),l+="</div>");var d=void 0!==i[n.image_size]?i[n.image_size]:i[640];if(n.display_gallery)if(void 0!==a.is_private&&!0===a.is_private)l+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var g=(a.edge_owner_to_timeline_media||a.edge_hashtag_to_media).edges;u=g.length>n.items?n.items:g.length,l+="<div class='instagram_gallery'>";for(var m=0;m<u;m++){var _,p,c,f="https://www.instagram.com/p/"+g[m].node.shortcode;switch(g[m].node.__typename){case"GraphSidecar":p="sidecar",_=g[m].node.thumbnail_resources[d].src;break;case"GraphVideo":p="video",_=g[m].node.thumbnail_src;break;default:p="image",_=g[m].node.thumbnail_resources[d].src}c=void 0!==g[m].node.edge_media_to_caption.edges[0]&&void 0!==g[m].node.edge_media_to_caption.edges[0].node&&void 0!==g[m].node.edge_media_to_caption.edges[0].node.text&&null!==g[m].node.edge_media_to_caption.edges[0].node.text?g[m].node.edge_media_to_caption.edges[0].node.text:void 0!==g[m].node.accessibility_caption&&null!==g[m].node.accessibility_caption?g[m].node.accessibility_caption:(s?a.name:a.username)+" image "+m,l+="<div class='ins-over'><a href='"+f+"' class='overflow-h instagram-"+p+"' rel='noopener' target='_blank'>",l+="<img class='ins-img' "+(n.lazy_load?" loading='lazy'":"")+" src='"+_+"' alt='"+c.replace(/[&<>"'`=\/]/g,function(e){return r[e]})+"'"+t.gallery_image+" />",l+="<div class='over'><ul><li><i class='fa fa-heart-o'></i><span class='mar-left'>"+g[m].node.edge_media_preview_like.count+"</span></li><li><i class='fa fa-comment-o'></i><span class='mar-left'>"+g[m].node.edge_media_to_comment.count+"</span></li></ul></div>",l+="</a></div>"}l+="</div>"}if(n.display_igtv&&void 0!==a.edge_felix_video_timeline){var h=a.edge_felix_video_timeline.edges,u=h.length>n.items?n.items:h.length;if(h.length>0){l+="<div class='instagram_igtv'>";for(m=0;m<u;m++)l+="<a href='https://www.instagram.com/p/"+h[m].node.shortcode+"' rel='noopener' target='_blank'>",l+="<img"+(n.lazy_load?" loading='lazy'":"")+" src='"+h[m].node.thumbnail_src+"' alt='"+n.username+" instagram image "+m+"'"+t.gallery_image+" />",l+="</a>";l+="</div>"}}e(n.container).html(l)}null!=n.callback&&n.callback(a)}else n.on_error("Instagram Feed: It looks like YOUR network has been temporary banned because of too many requests. See https://github.com/jsanahuja/jquery.instagramFeed/issues/25",4)}).fail(function(e){n.on_error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: "+e.status,5)}),!0}}(jQuery);